<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for src/components/scroll-segment/scroll-segment.vue</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../../index.html">all files</a> / <a href="index.html">src/components/scroll-segment/</a> scroll-segment.vue
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/55</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/16</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/3</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/55</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">&lt;template&gt;
    &lt;div class="vm-scroll-segment"&gt;
        &lt;div class="scroll-segment-outer" ref="scrollSegmentOuter"&gt;
            &lt;div class="scroll-segment-wrap" ref="scrollSegmentWrap"&gt;
                &lt;slot&gt;&lt;/slot&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script type="text/javascript"&gt;
  /**
   * @component ScrollSegment
   * @description
   *
   * ## 滑动片段组件 / ScrollSegment
   *
   * ### 介绍
   *
   * 该组件提供了一个可横向滚动的盒子, 子组件`ScrollSegmentButton`作为每一项在其中可滚动. 比如用在横向的Segment选择, 比如网易新闻的不同新闻类别;或者电影的横向滚动清单等. 当点击某一个`ScrollSegmentButton`子组件时, 该组件滚动到中间. 需要注意的是, 该组件提供水平方向的滚动, 且子组件的长度并不是固定的, 任意长度都能点击后移动到中间.
   *
   *
   * ### v-model控制初始值
   *
   * 通过v-model控制初始值, 当值发生变化时, 组件也能同步更新位置. 如果设置的值超过子组件的数量边界(0 -&gt; length-1), 则设置的值不生效.
   *
   *
   * ### 如何引入
   * ```
   * // 引入
   * import { ScrollSegment, ScrollSegmentButton } from 'vimo/lib/scroll-segment'
   * // 安装
   * Vue.component(ScrollSegment.name, ScrollSegment)
   * Vue.component(ScrollSegmentButton.name, ScrollSegmentButton)
   * // 或者
   * export default{
   *   src: {
   *     ScrollSegment, ScrollSegmentButton
   *  }
   * }
   * ```
   *
   * @props {String} [activeClass='segment-button-active'] - 子组件激活时添加的class
   * @props {Number} [value=0] - 子组件初始值
   *
   * @demo #/scroll-segment
   * @usage
   *
   * &lt;ScrollSegment :value="2"&gt;
   *    &lt;ScrollSegmentButton&gt;
   *        &lt;div class="srollSegmentButton"&gt;鱼香肉丝&lt;/div&gt;
   *    &lt;/ScrollSegmentButton&gt;
   *    &lt;ScrollSegmentButton&gt;
   *        &lt;div class="srollSegmentButton"&gt;红烧狮子头&lt;/div&gt;
   *    &lt;/ScrollSegmentButton&gt;
   *    &lt;ScrollSegmentButton&gt;
   *        &lt;div class="srollSegmentButton"&gt;卷了三个鸡蛋的煎饼果子&lt;/div&gt;
   *    &lt;/ScrollSegmentButton&gt;
   *    &lt;ScrollSegmentButton&gt;
   *        &lt;div class="srollSegmentButton"&gt;新疆烤肉和香酥烤全羊&lt;/div&gt;
   *    &lt;/ScrollSegmentButton&gt;
   *    &lt;ScrollSegmentButton&gt;
   *        &lt;div class="srollSegmentButton"&gt;土家酱饼&lt;/div&gt;
   *    &lt;/ScrollSegmentButton&gt;
   *    &lt;ScrollSegmentButton&gt;
   *        &lt;div class="srollSegmentButton"&gt;杭椒牛柳&lt;/div&gt;
   *    &lt;/ScrollSegmentButton&gt;
   *    &lt;ScrollSegmentButton&gt;
   *        &lt;div class="srollSegmentButton"&gt;鸡蛋灌饼&lt;/div&gt;
   *    &lt;/ScrollSegmentButton&gt;
   *    &lt;ScrollSegmentButton&gt;
   *        &lt;div class="srollSegmentButton"&gt;超级辣的BT变态烤翅&lt;/div&gt;
   *    &lt;/ScrollSegmentButton&gt;
   *     &lt;ScrollSegmentButton&gt;
   *        &lt;div class="srollSegmentButton"&gt;啤酒&lt;/div&gt;
   *    &lt;/ScrollSegmentButton&gt;
   * &lt;/ScrollSegment&gt;
   *
   * */
  import { clamp } from '../../util/util'
  export default{
    name: 'ScrollSegment',
    data () {
<span class="cstat-no" title="statement not covered" >      return {</span>
        isInit: false,
        timer: null,
&nbsp;
        min: 0,
        max: 0,
        rafId: null,
        childComponents: [],        // 子组件列表
        wrapRect: null,             // 滚动部分的尺寸
        contentRect: null          // 当前组件盒子的尺寸
      }
    },
    props: {
      activeClass: {
        type: String,
        default: 'segment-button-active'
      },
      // 选中的index, 而不是子组件的_uid
      value: {
        type: Number,
        default: 0
      }
    },
    watch: {
      value (val, oldValue) {
        let selectedComponent <span class="cstat-no" title="statement not covered" >= this.childComponents[val</span>]
<span class="cstat-no" title="statement not covered" >        if (selectedComponent) {</span>
<span class="cstat-no" title="statement not covered" >          this.refresh(selectedComponent._uid, selectedComponent.rect</span>)
        } else {
          // 如果没有子组件对应则返回上一个值
<span class="cstat-no" title="statement not covered" >          this.$emit('input', oldValue</span>)
        }
      }
    },
    computed: {
      outerElement () {
<span class="cstat-no" title="statement not covered" >        return this.$refs.scrollSegmentOute</span>r
      },
      wrapElement () {
<span class="cstat-no" title="statement not covered" >        return this.$refs.scrollSegmentWra</span>p
      }
    },
    methods: {
      /**
       * 记录组组件
       * @private
       * */
      record (childComponent) {
<span class="cstat-no" title="statement not covered" >        this.childComponents.push(childComponent</span>)
<span class="cstat-no" title="statement not covered" >        console.assert(!this.isInit, 'ScrollSegment组件为异步组件, 且因为机制问题只能异步一次, 如果场景特殊请使用v-if关闭组件后再开启. '</span>)
<span class="cstat-no" title="statement not covered" >        window.clearTimeout(this.timer</span>)
<span class="cstat-no" title="statement not covered" >        this.timer = window.setTimeout(() =<span class="fstat-no" title="function not covered" >&gt; {</span></span>
<span class="cstat-no" title="statement not covered" >          if (!this.isInit) {</span>
<span class="cstat-no" title="statement not covered" >            this.init(</span>)
          }
<span class="cstat-no" title="statement not covered" >          this.isInit = tru</span>e
        }, 0)
      },
&nbsp;
      /**
       * 子组件调用, 刷新组件的位置
       * @param {String} id - id
       * @param {Object} rect - rect
       * @param {Number} rect.height - rect.height
       * @param {Number} rect.width - rect.width
       * @param {Number} rect.right - rect.right
       * @param {Number} rect.left - rect.left
       * @param {Number} rect.top - rect.top
       * @param {Number} rect.bottom - rect.bottom
       * @private
       * */
      refresh (id, rect) {
<span class="cstat-no" title="statement not covered" >        window.cancelAnimationFrame(this.rafId</span>)
<span class="cstat-no" title="statement not covered" >        this.rafId = nul</span>l
&nbsp;
        // fixBug: 弹性滚动时不触发refresh
<span class="cstat-no" title="statement not covered" >        if (this.outerElement.scrollLeft &lt; 0 || this.outerElement.scrollLeft &gt; (this.outerElement.scrollWidth - this.outerElement.offsetWidth)) {</span>
<span class="cstat-no" title="statement not covered" >          retur</span>n
        }
&nbsp;
        // 设置子组件的class状态
<span class="cstat-no" title="statement not covered" >        for (let i = 0, len = this.childComponents.length; len &gt; i; i++) {</span>
          let child <span class="cstat-no" title="statement not covered" >= this.childComponents[i</span>]
<span class="cstat-no" title="statement not covered" >          child.setState(id</span>)
<span class="cstat-no" title="statement not covered" >          if (id === child._uid) {</span>
<span class="cstat-no" title="statement not covered" >            this.$emit('input', i</span>)
          }
        }
&nbsp;
        let contentWidth <span class="cstat-no" title="statement not covered" >= this.contentRect.widt</span>h
        let contentLeft <span class="cstat-no" title="statement not covered" >= this.contentRect.lef</span>t
&nbsp;
        let itemWidth <span class="cstat-no" title="statement not covered" >= rect.widt</span>h
        let itemLeft <span class="cstat-no" title="statement not covered" >= rect.left - contentLef</span>t
&nbsp;
        let target <span class="cstat-no" title="statement not covered" >= itemLeft - contentWidth / 2 + itemWidth / </span>2
        // 滚动的实际值, 必须在最大最小值之间(warp的滚动最大最小值)
<span class="cstat-no" title="statement not covered" >        target = clamp(this.min, target, this.max</span>)
&nbsp;
        // 调整scrollLeft的位置
        const step <span class="cstat-no" title="statement not covered" >= () =<span class="fstat-no" title="function not covered" >&gt; {</span></span>
          let speed <span class="cstat-no" title="statement not covered" >= </span>6 // 惯性速度
          let now <span class="cstat-no" title="statement not covered" >= this.outerElement.scrollLef</span>t
          let to <span class="cstat-no" title="statement not covered" >= Math.floor((now - target) / speed</span>)
<span class="cstat-no" title="statement not covered" >          this.outerElement.scrollLeft = now - t</span>o
&nbsp;
          // 如果距离不为零, 继续调用迭代本函数
          // 如果页面没被激活则不进行动画
<span class="cstat-no" title="statement not covered" >          if (Math.abs(to) &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >            this.rafId = window.requestAnimationFrame(step</span>)
          } else {
<span class="cstat-no" title="statement not covered" >            window.cancelAnimationFrame(this.rafId</span>)
<span class="cstat-no" title="statement not covered" >            this.rafId = nul</span>l
          }
        }
&nbsp;
        // 边界检查
<span class="cstat-no" title="statement not covered" >        if (target &lt; this.min) {</span>
<span class="cstat-no" title="statement not covered" >          target = this.mi</span>n
        }
<span class="cstat-no" title="statement not covered" >        if (target &gt; this.max) {</span>
<span class="cstat-no" title="statement not covered" >          target = this.ma</span>x
        }
<span class="cstat-no" title="statement not covered" >        this.rafId = window.requestAnimationFrame(step</span>)
      },
&nbsp;
      /**
       * 初始化
       * @private
       * */
      init () {
        // 获取当前组件的尺寸及距离页面的位置
        // width left
<span class="cstat-no" title="statement not covered" >        this.contentRect = {</span>
          left: this.outerElement.offsetLeft,
          width: this.outerElement.offsetWidth
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        this.wrapRect = {</span>
          left: this.wrapElement.offsetLeft,
          width: this.wrapElement.offsetWidth
        }
&nbsp;
        // 边界
<span class="cstat-no" title="statement not covered" >        this.min = </span>0
<span class="cstat-no" title="statement not covered" >        this.max = this.wrapRect.width - this.contentRect.widt</span>h
&nbsp;
        // 初始化时确定初始选中的位置
        let selectedComponent <span class="cstat-no" title="statement not covered" >= this.childComponents[this.value</span>]
<span class="cstat-no" title="statement not covered" >        this.childComponents.forEach((child) =<span class="fstat-no" title="function not covered" >&gt; {</span></span>
<span class="cstat-no" title="statement not covered" >          child.setState(selectedComponent._uid</span>)
        })
&nbsp;
        let target <span class="cstat-no" title="statement not covered" >= selectedComponent.rect.left - this.contentRect.width / 2 + selectedComponent.rect.width / </span>2
<span class="cstat-no" title="statement not covered" >        this.outerElement.scrollLeft = clamp(this.min, target, this.max</span>)
&nbsp;
        // 隐藏scrollbar
        let height <span class="cstat-no" title="statement not covered" >= this.$el.getBoundingClientRect().heigh</span>t
<span class="cstat-no" title="statement not covered" >        this.$el.style.minHeight = height + 'px</span>'
<span class="cstat-no" title="statement not covered" >        this.wrapElement.style.minHeight = height + 'px</span>'
      }
    },
    mounted () {
&nbsp;
    }
  }
&lt;/script&gt;
&lt;style lang="less"&gt;
    .vm-scroll-segment {
        height: 100%;
        width: 100%;
        overflow: hidden;
        position: relative;
        .scroll-segment-outer {
            overflow-x: scroll;
            overflow-y: hidden;
            position: relative;
            // for hide scroll bar
            height: ~'calc(100% + 10px)';
            -webkit-overflow-scrolling: touch;
            &amp;::-webkit-scrollbar {
                display: none;
            }
        }
&nbsp;
        .scroll-segment-wrap {
            display: inline-flex;
            flex-direction: row;
            flex-wrap: nowrap;
            // for hide scroll bar
            height: ~'calc(100% - 10px)';
        }
    }
&lt;/style&gt;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sat Nov 04 2017 21:46:17 GMT+0800 (CST)
</div>
</div>
<script src="../../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../../sorter.js"></script>
</body>
</html>
