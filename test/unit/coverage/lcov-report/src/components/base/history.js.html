<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for src/components/base/history.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../../index.html">all files</a> / <a href="index.html">src/components/base/</a> history.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">22.22% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>18/81</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">3.92% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>2/51</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">38.46% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>5/13</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">22.22% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>18/81</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * @class History
 * @classdesc 通过vue-router的onRouteChangeBefore事件构建本地历史记录
 *
 * ## 问题
 *
 * 单页应用的一个需求是需要知道路由切换是前进还是后退, 但是浏览器对路由切换只给了两个事件 `hashchange` 和 `popstate`, 故无从判断当前操作是后退还是前进.
 *
 * ## 解决方案
 *
 * 这个类通过vue-router的onRouteChangeBefore事件构建本地历史记录. 当路由切换时, 内建历史记录数组, 类似于一个stack, 这个能正确反映当前app的浏览历史记录.
 *
 * 完成的功能如下:
 *
 * - 内建导航记录
 * - 此History是对router实例的拓展, 但是不会为router实例添加方法, 而是重新定义$history, 这个可在业务的this中访问到
 */
&nbsp;
export class History {
  constructor (router, config, platform) {
    this._history = [] // 存储当前导航的历史记录, 内容为 route object（路由信息对象）
    this._direction = 'forward' // forward/backward
    this._router = router // vue-router实例
    this._config = config // config 实例
    this._platform = platform // platform 实例
    this.isReplace = false // 路由跳转是否是使用replace方法
    this.usePushWindow = this._config.getBoolean('usePushWindow', false) // 支付宝 和 钉钉 两个模式下路由跳转是否开启新页面
&nbsp;
    // 监听路由变化, 维护本地历史记录
    // 路由切换前
    <span class="missing-if-branch" title="else path not taken" >E</span>if (this._router) {
      const _this = this
&nbsp;
      /**
       * 方法增强: replace()
       * */
      let replaceCopy = this._router.replace
      replaceCopy = replaceCopy.bind(this._router)
      this._router.replace = function () <span class="fstat-no" title="function not covered" >{</span>
        let args = <span class="cstat-no" title="statement not covered" >Array.from(arguments)</span>
        let to = <span class="cstat-no" title="statement not covered" >_this._router.resolve(args[0]).resolved</span>
        let from = <span class="cstat-no" title="statement not covered" >_this._history[_this.length - 1]</span>
<span class="cstat-no" title="statement not covered" >        if (to.fullPath !== from.fullPath || to.name !== from.name) {</span>
          // replace时, 前后地址不一样的话才处理
<span class="cstat-no" title="statement not covered" >          _this.isReplace = true</span>
<span class="cstat-no" title="statement not covered" >          replaceCopy.apply(null, arguments)</span>
        }
      }
&nbsp;
      <span class="missing-if-branch" title="if path not taken" >I</span>if (this.usePushWindow) {
        /**
         * 方法增强: back()
         * */
        let backCopy = <span class="cstat-no" title="statement not covered" >this._router.back</span>
<span class="cstat-no" title="statement not covered" >        backCopy = backCopy.bind(this._router)</span>
<span class="cstat-no" title="statement not covered" >        this._router.back = function () <span class="fstat-no" title="function not covered" >{</span></span>
          let isHandled =
<span class="cstat-no" title="statement not covered" >            _this._platform.popWindow &amp;&amp; _this._platform.popWindow()</span>
<span class="cstat-no" title="statement not covered" >          if (!isHandled) {</span>
<span class="cstat-no" title="statement not covered" >            backCopy.apply(null, arguments)</span>
          }
        }
&nbsp;
        /**
         * 方法增强: go()
         * */
        let goCopy = <span class="cstat-no" title="statement not covered" >this._router.go</span>
<span class="cstat-no" title="statement not covered" >        goCopy = goCopy.bind(this._router)</span>
<span class="cstat-no" title="statement not covered" >        this._router.go = function (n) <span class="fstat-no" title="function not covered" >{</span></span>
          let isHandled = <span class="cstat-no" title="statement not covered" >_this._platform.popTo &amp;&amp; _this._platform.popTo(n)</span>
<span class="cstat-no" title="statement not covered" >          if (!isHandled) {</span>
<span class="cstat-no" title="statement not covered" >            goCopy.apply(null, arguments)</span>
          }
        }
      }
&nbsp;
      this._router.beforeEach((to, from, next) =&gt; <span class="fstat-no" title="function not covered" >{</span>
        // 如果使用了replace, 则跳过当前拦截的路由信息, 并且将最后一个重置
<span class="cstat-no" title="statement not covered" >        if (this.isReplace) {</span>
<span class="cstat-no" title="statement not covered" >          this.isReplace = false</span>
<span class="cstat-no" title="statement not covered" >          this._history.pop()</span>
<span class="cstat-no" title="statement not covered" >          this._history.push(to)</span>
<span class="cstat-no" title="statement not covered" >          next()</span>
        } else <span class="cstat-no" title="statement not covered" >if (this.length &lt;= 1) {</span>
          /**
           * 当本地维护的历时记录为空或, 意味着页面为首次进入, 并未初始化,
           * 此时, 可能我们是从app中的某个页面进入的,
           * 因此, 需要判断下history.length, 此时, 不显示back按钮
           *
           * 同理, length=1也同样处理
           * */
<span class="cstat-no" title="statement not covered" >          this._pushHistory({ to, from, next })</span>
        } else {
          // 向记录后方追溯, 如果有匹配可认为是go(-n)操作, 否则就是push操作
<span class="cstat-no" title="statement not covered" >          for (let i = this.length - 2; i &gt; -1; i--) {</span>
            let _previous = <span class="cstat-no" title="statement not covered" >this._history[i]</span>
<span class="cstat-no" title="statement not covered" >            if (to.name === _previous.name) {</span>
<span class="cstat-no" title="statement not covered" >              this._popHistory(next, i)</span>
<span class="cstat-no" title="statement not covered" >              return</span>
            }
          }
&nbsp;
          // 如果不在过去的历史记录, 则认为是新增加记录
<span class="cstat-no" title="statement not covered" >          this._pushHistory({ to, from, next })</span>
        }
      })
    }
  }
&nbsp;
  get length () {
    return this._history.length
  }
&nbsp;
  // -------- private --------
  /**
   * push to history
   * @private
   * */
  _pushHistory ({ to, from, next }) <span class="fstat-no" title="function not covered" >{</span>
<span class="cstat-no" title="statement not covered" >    if (to.fullPath === from.fullPath &amp;&amp; to.name === from.name) {</span>
      // 同地址同名称跳转不记录不处理
<span class="cstat-no" title="statement not covered" >      return</span>
    }
&nbsp;
    let isHandled = <span class="cstat-no" title="statement not covered" >false</span>
<span class="cstat-no" title="statement not covered" >    if (</span>
      this.usePushWindow &amp;&amp;
      from.matched.length !== 0 &amp;&amp;
      to.matched.length !== 0
    ) {
      let url = <span class="cstat-no" title="statement not covered" >''</span>
      let mode = <span class="cstat-no" title="statement not covered" >this._router.mode</span>
<span class="cstat-no" title="statement not covered" >      if (mode === 'hash') {</span>
<span class="cstat-no" title="statement not covered" >        url = `${window.location.origin}${window.location.pathname}${window</span>
          .location.search}#${to.fullPath}`
      } else {
<span class="cstat-no" title="statement not covered" >        console.error('history.js::只支持 mode: "hash"')</span>
      }
<span class="cstat-no" title="statement not covered" >      isHandled = this._platform.pushWindow &amp;&amp; this._platform.pushWindow(url)</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!isHandled) {</span>
      // fallback
<span class="cstat-no" title="statement not covered" >      this._direction = 'forward'</span>
<span class="cstat-no" title="statement not covered" >      this._history.push(to)</span>
<span class="cstat-no" title="statement not covered" >      next()</span>
    }
  }
&nbsp;
  /**
   * pop history record
   * @private
   * */
  _popHistory (next, i = 0) <span class="fstat-no" title="function not covered" >{</span>
    // 激活了浏览器的后退,这里只需要更新状态
<span class="cstat-no" title="statement not covered" >    this._direction = 'backward'</span>
<span class="cstat-no" title="statement not covered" >    this._history = this._history.splice(0, i + 1)</span>
<span class="cstat-no" title="statement not covered" >    next()</span>
  }
&nbsp;
  /**
   * 获取当前的页面进行的方向
   * 只能是这两个值: forward || backward
   * @return {string}
   * */
  getDirection () {
    return this._direction
  }
&nbsp;
  /**
   * 判断是否能返回
   * @return {Boolean}
   * */
  canGoBack () {
    return this.length &gt; 1
  }
&nbsp;
  /**
   * 获取当前的导航记录
   * @return {Array}
   * */
  getHistory () <span class="fstat-no" title="function not covered" >{</span>
<span class="cstat-no" title="statement not covered" >    return this._history</span>
  }
&nbsp;
  /**
   * 返回root页面(在路由信息中标示```route.meta.root=true```的页面)
   * @example
   * {
   *    path: '/',
   *    name: 'index',
   *    meta: {
   *      root: true
   *    },
   *    component: require('@/pages/index.vue')
   * }
   * */
  toRoot () <span class="fstat-no" title="function not covered" >{</span>
    // 支付宝方式返回首页
    let isHandled = <span class="cstat-no" title="statement not covered" >this._platform.popToRoot &amp;&amp; this._platform.popToRoot()</span>
<span class="cstat-no" title="statement not covered" >    if (!isHandled) {</span>
<span class="cstat-no" title="statement not covered" >      if (this._router.options.routes) {</span>
        let routes = <span class="cstat-no" title="statement not covered" >this._router.options.routes</span>
<span class="cstat-no" title="statement not covered" >        for (let i = 0, len = routes.length; len &gt; i; i++) {</span>
          let route = <span class="cstat-no" title="statement not covered" >routes[i]</span>
<span class="cstat-no" title="statement not covered" >          if (route &amp;&amp; route.meta &amp;&amp; route.meta.root) {</span>
<span class="cstat-no" title="statement not covered" >            console.log(route)</span>
<span class="cstat-no" title="statement not covered" >            this._direction = 'backward'</span>
<span class="cstat-no" title="statement not covered" >            this._router.replace(route)</span>
<span class="cstat-no" title="statement not covered" >            this._history = []</span>
<span class="cstat-no" title="statement not covered" >            return</span>
          }
        }
      }
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (!isHandled) {</span>
<span class="cstat-no" title="statement not covered" >        this._router.go(1 - this.length)</span>
      }
    }
  }
}
&nbsp;
export function setupHistory (router, config, platform) {
  return new History(router, config, platform)
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sat Nov 04 2017 21:46:17 GMT+0800 (CST)
</div>
</div>
<script src="../../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../../sorter.js"></script>
</body>
</html>
