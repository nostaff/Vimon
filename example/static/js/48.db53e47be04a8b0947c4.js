webpackJsonp([48],{575:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(12),n=i(18),r={name:"vm-img",inject:{contentComponent:{from:"contentComponent","default":null}},props:{src:String,alt:{type:String,"default":""},width:{type:[Number,String],"default":0},height:{type:[Number,String],"default":0}},data:function(){return{isLoaded:!1,srcValue:null,w:this.wQ,h:this.hQ,canRequest:!1,canRender:!1,hasLoaded:!1,requestingSrc:null,renderedSrc:null,rect:null,imgElement:null,wQ:Object(s.f)(this.width)||0,hQ:Object(s.f)(this.height)||0,unreg:null}},watch:{width:function(){this._setDims()},height:function(){this._setDims()},src:function(t){this._updateSrcValue(t)}},created:function(){this.contentComponent?this.contentComponent&&this.contentComponent.addImg(this):console.warn("Img组件必须在Content组件中才能正常工作!")},mounted:function(){var t=this;this.imgElement=this.$refs.img,this._setDims(),this._updateSrcValue(this.src),this.unreg=Object(n.l)(this.imgElement,"load",function(){t.hasLoaded=!0,t.update()},{passive:!0})},destroyed:function(){this.unreg&&this.unreg(),this.unreg=null,this.reset()},methods:{reset:function(){!this.requestingSrc||this.renderedSrc||this.hasLoaded||(this._srcAttr(""),this.requestingSrc=null),this.renderedSrc&&(this.renderedSrc=null,this._isLoaded(!1))},update:function(){this.src&&this.contentComponent&&this.contentComponent.isImgsUpdatable()&&(this.canRequest&&this.src!==this.renderedSrc&&this.src!==this.requestingSrc&&!this.hasLoaded&&(this.requestingSrc=this.src,this._isLoaded(!1),this._srcAttr(this.src),this._setDims()),this.canRender&&this.hasLoaded&&(this.src!==this.renderedSrc?(this.renderedSrc=this.src,this._setDims(),this._srcAttr(this.src),this._isLoaded(!0)):this._isLoaded(!0)))},_isLoaded:function(t){this.isLoaded=t},_srcAttr:function(t){this.srcValue=t},_setDims:function(){this.wQ=Object(s.f)(this.width)||0,this.hQ=Object(s.f)(this.height)||0,this.w===this.wQ&&this.h===this.hQ||(this.w!==this.wQ&&(this.w=this.wQ),this.h!==this.hQ&&(this.h=this.hQ))},_updateSrcValue:function(t){t!==this.src&&(this.reset(),this.hasLoaded=0===t.indexOf("data:"),this.update())},getTop:function(){var t=this._getBounds();return t&&t.top||0},getBottom:function(){var t=this._getBounds();return t&&t.bottom||0},_getBounds:function(){return this.rect||(this.rect=this.$el.getBoundingClientRect()),this.rect}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ion-img","class":{"img-loaded":t.isLoaded,"img-unloaded":!t.isLoaded},style:{width:t.w,height:t.h}},[i("transition",{attrs:{name:"fade"}},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}],ref:"img",attrs:{alt:t.alt,src:t.srcValue,width:t.w,height:t.h}})])],1)},staticRenderFns:[]},a={components:{"vm-img":i(6)(r,h,!1,null,null,null).exports},name:"name",data:function(){return{totalCount:20}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("vm-page",{directives:[{name:"nav",rawName:"v-nav",value:{title:"Img"},expression:"{title: 'Img'}"}]},[i("vm-content",{attrs:{padding:""}},[i("h1",[t._v("IMG Lazyload")]),t._v(" "),i("p",[t._v("只有需要加载的图片才会下载显示, 已下载完毕的图片会等到合适位置才显示.")]),t._v(" "),i("p",[t._v("\n      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eius expedita officia quam reiciendis similique suscipit vel. Assumenda, cum error eum, fuga nobis pariatur placeat praesentium qui, repellendus repudiandae similique veritatis.")]),t._v(" "),t._l(t.totalCount,function(t){return i("vm-img",{key:t,attrs:{width:"100%",height:"200",src:"/static/background/"+t+".jpg"}})})],2)],1)},staticRenderFns:[]},c=i(6)(a,d,!1,null,null,null);e["default"]=c.exports}});